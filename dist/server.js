!function(e){var o={};function n(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var s in e)n.d(t,s,function(o){return e[o]}.bind(null,s));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=2)}([function(e,o){e.exports=require("util")},function(e,o){e.exports=require("bluebird")},function(e,o,n){(function(e){const o=n(3),t=o(),s=n(0),i=n(4),r=n(8),c=n(9),u=new i;t.use(o.static("public")),t.set("views",e+"/views"),t.set("view engine","ejs"),t.engine("html",n(10).renderFile),t.get("/test/:email",(e,o)=>{c.email=e.params.email,c.aa=e.query.aa,o.json(c)}),t.get("/dbtest/:user",(e,o)=>{let n=e.params.user;new r(u).execute(e=>{e.query("select * from User where uid=?",[n],(e,n)=>{o.json(n)})})});const l=t.listen(7e3,function(){console.log("Express's started on port 7000")});n(11).listen(l,{log:!1,origins:"*:*",pingInterval:3e3,pingTimeout:5e3}).sockets.on("connection",(e,o)=>{e.emit("message",{msg:"Welcome "+e.id}),s.log("connection>>",e.id,e.handshake.query),e.on("join",function(o,n){e.join(o,function(){s.log("Join",o,Object.keys(e.rooms)),n&&n()})}),e.on("leave",function(o,n){s.log("leave>>",o,e.id),e.leave(o,function(){n&&n()})}),e.on("rooms",function(o){o&&o(Object.keys(e.rooms))}),e.on("message",(o,n)=>{s.log("message>>",o),e.broadcast.to(o.room).emit("message",{room:o.room,msg:o.msg}),n&&n(o.msg)}),e.on("message-for-one",(o,n,t)=>{e.to(o).emit("message",{msg:n})}),e.on("disconnecting",function(o){s.log("disconnecting>>",e.id,Object.keys(e.rooms))}),e.on("disconnect",function(o){s.log("disconnect>>",e.id,Object.keys(e.rooms))})})}).call(this,"/")},function(e,o){e.exports=require("express")},function(e,o,n){const t=n(5),s=n(0),i=n(1);i.promisifyAll(t),i.promisifyAll(n(6).prototype),i.promisifyAll(n(7).prototype);const r={host:"115.71.233.22",user:"testuser",password:"testuser!@#",database:"testdb",multipleStatements:!0,connectionLimit:5,waitForConnections:!1};e.exports=class{constructor(e){e=e||r,this.pool=t.createPool(e)}connect(){return this.pool.getConnectionAsync().disposer(e=>e.release())}end(){this.pool.end(function(e){s.log(">>>>>>>>>>>>>>>>>>>>>>>>>>> End of Pool!!"),e&&s.log("ERR pool ending!!")})}}},function(e,o){e.exports=require("mysql")},function(e,o){e.exports=require("mysql/lib/Connection")},function(e,o){e.exports=require("mysql/lib/Pool")},function(e,o,n){const t=n(1);e.exports=class{constructor(e){this.pool=e}execute(e){t.using(this.pool.connect(),o=>{e(o)})}executeTx(e){t.using(this.pool.connect(),o=>{o.beginTransaction(n=>{e(o)})})}}},function(e){e.exports={id:123,name:"hong kil dong"}},function(e,o){e.exports=require("ejs")},function(e,o){e.exports=require("socket.io")}]);